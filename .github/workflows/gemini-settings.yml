# 파일 경로: .github/workflows/gemini_review.yml

name: Gemini AI Review

on:
  pull_request:
    types: [opened, synchronize]

jobs:
  review:
    # GitHub 토큰에 댓글 작성 권한을 부여합니다.
    permissions:
      pull-requests: write

    runs-on: ubuntu-latest
    steps:
      - name: Checkout Repository
        uses: actions/checkout@v3

      - name: Gemini AI Reviewer
        # 이것이 현재 사용되는 공식 액션 이름입니다.
        uses: google-github-actions/invoke-gemini@v1
        with:
          # 모델 이름을 명시해주는 것이 좋습니다.
          model: "gemini-1.5-flash-latest"
          # prompt는 이전과 동일하게 사용합니다.
          prompt: |
            이 Pull Request는 알고리즘 문제 풀이입니다.
            제출된 코드와 PR 본문을 분석하여, 풀이한 문제와 비슷한 유형의 백준 온라인 저지 문제 3개를 추천해주세요.
            추천 시에는 문제 번호, 제목, 그리고 어떤 점에서 유사한지 간략한 이유를 포함하여 목록 형식으로 작성해주세요.
          
          # GitHub 토큰 변수 이름이 변경되었습니다.
          github_token: ${{ secrets.GITHUB_TOKEN }}
